!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).idle=e()}(this,function(){"use strict";function i(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e,n){return(u=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);o=new(Function.bind.apply(t,o));return n&&r(o,n.prototype),o}).apply(null,arguments)}function a(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,l(t,e,"get"))}function c(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,l(t,e,"set"),n),n}function l(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function f(t){return p(t)&&t()}var p=function(t){return"function"==typeof t},h=function(t){return"[object Object]"===Object.prototype.toString.call(t)},v=function(t){return"[object Array]"===Object.prototype.toString.call(t)},y=function(t){if(!v(t))return[];for(var e=[],n=0;n<t.length;n++)t.indexOf(t[n])===n&&e.push(t[n]);return e},b=function(){},d=1,k=new WeakMap,m=new WeakMap,g=new WeakMap,w=new WeakMap,O=function(){function r(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),k.set(this,{writable:!0,value:!1}),m.set(this,{writable:!0,value:null}),g.set(this,{writable:!0,value:d}),w.set(this,{writable:!0,value:0}),s(this,"eventHandler",this.eventHandler.bind(this)),h(t)&&Object.assign(n,t),v(t)&&(v(n.tasks)?n.tasks=t.concat(n.tasks):n.tasks=t),p(t)&&(v(n.tasks)?n.tasks=[t].concat(n.tasks):n.tasks=[t]);t=n.events;v(t)&&(r.events=r.events.concat(t)),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({target:document.body,timeout:3e3,interval:1e3,loop:!1,enableMousemove:!1,tasks:[],events:[],onDispose:b,onPause:b,onResume:b},n),this.options.enableMousemove&&r.events.push("mousemove"),r.events=y(r.events);var o=this.options.target;r.events.forEach(function(t){o.addEventListener(t,e.eventHandler)}),this._start()}var t,e,n;return t=r,(e=[{key:"_run",value:function(){var t=this.options,e=t.tasks,n=t.loop;a(this,g)===d&&(e.length||this.dispose(),t=a(this,w)===e.length-1,e=e[a(this,w)],f(e),n&&t&&(c(this,w,0),this._start()),!n&&t&&this.dispose(),t||(c(this,w,+a(this,w)+1),this._start()))}},{key:"_clearTimer",value:function(){a(this,m)&&(clearTimeout(a(this,m)),c(this,m,null))}},{key:"_start",value:function(){var t=this;this._clearTimer();var e=this.options,n=e.interval,e=e.timeout,e=a(this,k)?n:e;c(this,m,setTimeout(function(){c(t,k,!0),t._run()},e))}},{key:"eventHandler",value:function(){c(this,k,!1),this._start()}},{key:"pause",value:function(t){a(this,g)===d&&(c(this,g,2),t=t||this.options.onPause,f(t))}},{key:"resume",value:function(t){2===a(this,g)&&(c(this,g,d),t=t||this.options.onResume,f(t),this._start())}},{key:"dispose",value:function(t){var e=this;c(this,g,3),this._clearTimer();var n=this.options.target;r.events.forEach(function(t){n.removeEventListener(t,e.eventHandler)});t=t||this.options.onDispose;f(t)}},{key:"stop",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.dispose.apply(this,e)}},{key:"destroy",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.dispose.apply(this,e)}},{key:"push",value:function(t){p(t)&&this.options.tasks.push(t)}},{key:"timeout",value:function(t){this.options.timeout=t}},{key:"interval",value:function(t){this.options.interval=t}},{key:"loop",value:function(t){this.options.loop=t}},{key:"isIdle",value:function(){return a(this,k)}}])&&o(t.prototype,e),n&&o(t,n),r}();return s(O,"events",["scroll","keydown","touchmove","touchstart","click"]),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return u(O,e)}});
//# sourceMappingURL=idle-state.min.js.map
